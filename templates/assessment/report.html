{% extends 'base.html' %} 

{% block title %}>_ WVAT // Assessment Report{% endblock title %}

{% block content %}
<div class="container">
  <!-- Report Header -->
  <section class="panel-section">
    <div class="section-header">
      <h2 class="section-title">Assessment_Report</h2>
      <span class="section-badge">Complete</span>
    </div>

    <div
      style="
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
        margin-bottom: 24px;
      "
    >
      <div>
        <p
          style="
            font-family: var(--font-hud);
            font-size: 11px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px;
          "
        >
          Client
        </p>
        <p
          style="
            font-family: var(--font-hud);
            font-size: 14px;
            color: var(--text-bright);
          "
        >
          {{ assessment.client.get_full_name }}
        </p>
      </div>

      <div>
        <p
          style="
            font-family: var(--font-hud);
            font-size: 11px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px;
          "
        >
          Target
        </p>
        <p
          style="
            font-family: var(--font-hud);
            font-size: 14px;
            color: var(--neon-cyan);
          "
        >
          <a href="{{ assessment.website }}" target="_blank"
            >{{ assessment.website }}</a
          >
        </p>
      </div>

      <div>
        <p
          style="
            font-family: var(--font-hud);
            font-size: 11px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px;
          "
        >
          Tested On
        </p>
        <p
          style="
            font-family: var(--font-hud);
            font-size: 14px;
            color: var(--text-bright);
          "
        >
          {{ assessment.tested_on|date:"Y-m-d H:i:s" }}
        </p>
      </div>
    </div>

    <div style="display: flex; justify-content: flex-end; gap: 16px">
      <a href="{% url 'view_report_pdf' assessment.id %}" class="btn-info">
        DOWNLOAD_PDF
      </a>
    </div>
  </section>

  <!-- Nuclei Logs -->
  <div class="results-header">
    <h3 class="results-title">Assessment_Logs</h3>
    <span class="results-count">[ RAW JSONL OUTPUT ]</span>
  </div>

  <div class="vuln-list">
    {% if nuclei_logs %} {% for log in nuclei_logs %}
    <article class="vuln-card medium" style="padding: 0; overflow: hidden">
      <pre
        style="
          background: var(--bg-void);
          padding: 20px;
          margin: 0;
          font-family: &quot;Courier New&quot;, monospace;
          font-size: 13px;
          line-height: 1.5;
          white-space: pre-wrap;
          color: var(--neon-green);
          border-left: 2px solid var(--neon-cyan);
        "
      >
{{ log }}</pre
      >
    </article>
    {% endfor %} {% else %}
    <div class="panel-section">
      <div style="text-align: center; padding: 40px">
        <p
          style="
            font-family: var(--font-hud);
            font-size: 24px;
            color: var(--text-dim);
            margin-bottom: 16px;
          "
        >
          NO_LOGS_AVAILABLE
        </p>
        <p style="font-size: 14px; color: var(--text-dim)">
          The raw Nuclei output file could not be found or is empty.
        </p>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock content %}
